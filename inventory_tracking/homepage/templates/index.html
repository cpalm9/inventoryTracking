<%inherit file="base.htm" />

<%block name="content">
      <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Dashboard</h1>
        </div>
        <!-- /.col-lg-12 -->
      </div>
      <!-- /.row -->
    <div class="row">
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                          <i class="fa fa-shopping-cart fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">${ products.count() }</div>
                            <div>Total Products!</div>
                        </div>
                    </div>
                </div>
                <a href="/create/">
                    <div class="panel-footer">
                        <span class="pull-left">Create New Product</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-green">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-tasks fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">${todayProds.count()}</div>
                            <div>Products Created Today!</div>
                        </div>
                    </div>
                </div>
                <a href="/view_products/">
                    <div class="panel-footer">
                        <span class="pull-left">View All Products</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-yellow">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-shopping-cart fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">${manufacturers.count() }</div>
                            <div>Total Manufacturers!</div>
                        </div>
                    </div>
                </div>
                <a href="/view_products/">
                    <div class="panel-footer">
                        <span class="pull-left">View All Products</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
        <div class="col-lg-3 col-md-6">
            <div class="panel panel-red">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-xs-3">
                            <i class="fa fa-support fa-5x"></i>
                        </div>
                        <div class="col-xs-9 text-right">
                            <div class="huge">13</div>
                            <div>Sales Today!</div>
                        </div>
                    </div>
                </div>
                <a href="/view_products/">
                    <div class="panel-footer">
                        <span class="pull-left">View All Products</span>
                        <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                        <div class="clearfix"></div>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-8">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Sales by Quarter
                    <div class="pull-right">
                        <div class="btn-group">
                            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                                Actions
                                <span class="caret"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div id="chris-chart"></div>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Sales by Series

                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="row">
                        <!-- /.col-lg-4 (nested) -->
                            <div id="chris-bar"></div>
                        <!-- /.col-lg-8 (nested) -->
                    </div>
                    <!-- /.row -->
                </div>
                <!-- /.panel-body -->
            </div>
        </div>
        <!-- /.col-lg-8 -->
        <div class="col-lg-4">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bell fa-fw"></i> Newest Products
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="list-group">
                      <% i = 0 %>
                      %for p in products:
                        <% i = i + 1 %>
                        % if i == 6:
                          <% break %>
                        %endif
                        <a href="#" class="list-group-item">
                             ${p.manufacturer}
                            <span class="pull-right text-muted small"><em>${p.date}</em>
                            </span>
                        </a>
                      %endfor
                    </div>
                    <!-- /.list-group -->
                    <a href="/view_products" class="btn btn-default btn-block">View All Products</a>
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
            <div class="panel panel-default">
                <div class="panel-heading">
                    <i class="fa fa-bar-chart-o fa-fw"></i> Sales by Type of Sale
                </div>
                <div class="panel-body">
                    <div id="chris-donut"></div>
                    <a href="#" class="btn btn-default btn-block">View Details</a>
                </div>
                <!-- /.panel-body -->
            </div>
    </div>
    <!-- /.row -->
    <script>
        new Morris.Area({
            // ID of the element in which to draw the chart.
            element: 'chris-chart',
            // Chart data records -- each entry in this array corresponds to a point on
            // the chart.
            data: [{
                    period: '2015 Q1',
                    Product1: 2666,
                    Product2: null,
                    Product3: 2647
                }, {
                    period: '2015 Q2',
                    Product1: 2778,
                    Product2: 2294,
                    Product3: 2441
                }, {
                    period: '2015 Q3',
                    Product1: 4912,
                    Product2: 1969,
                    Product3: 2501
                }, {
                    period: '2015 Q4',
                    Product1: 3767,
                    Product2: 3597,
                    Product3: 5689
                }, {
                    period: '2016 Q1',
                    Product1: 6810,
                    Product2: 1914,
                    Product3: 2293
                }, {
                    period: '2016 Q2',
                    Product1: 5670,
                    Product2: 4293,
                    Product3: 1881
                }, {
                    period: '2016 Q3',
                    Product1: 4820,
                    Product2: 3795,
                    Product3: 1588
                }, {
                    period: '2016 Q4',
                    Product1: 15073,
                    Product2: 5967,
                    Product3: 5175
                }, {
                    period: '2017 Q1',
                    Product1: 10687,
                    Product2: 4460,
                    Product3: 2028
                }, {
                    period: '2017 Q2',
                    Product1: 8432,
                    Product2: 5713,
                    Product3: 1791
                }, {
                    period: '2017 Q3',
                    Product1: 9432,
                    Product2: 6713,
                    Product3: 791
                }],
                xkey: 'period',
                ykeys: ['Product1', 'Product2', 'Product3'],
                labels: ['Product 1', 'Product 2', 'Product 3'],
                pointSize: 2,
                hideHover: 'auto',
                resize: true
        });
        new Morris.Donut({
            element: 'chris-donut',
            data: [{
                label: "Download Sales",
                value: 12
            }, {
                label: "In-Store Sales",
                value: 30
            }, {
                label: "Mail-Order Sales",
                value: 20
            }],
            resize: true
        });
        new Morris.Bar({
            element: 'chris-bar',
            data: [{
                y: '2016',
                a: 75,
                b: 65
            }, {
                y: '2017',
                a: 100,
                b: 90
            }],
            xkey: 'y',
            ykeys: ['a', 'b'],
            labels: ['Series A', 'Series B'],
            hideHover: 'auto',
            resize: true
        });
    </script>
</%block>